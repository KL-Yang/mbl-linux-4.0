From e4760e992640f53ffa9d0050c596cf337e98ca4b Mon Sep 17 00:00:00 2001
From: YangKunlun <yangkunlun@gmail.com>
Date: Sat, 22 Jul 2017 21:52:48 +0800
Subject: [PATCH 3/4] 02-Enable sata driver

---
 drivers/ata/Kconfig  | 12 +++++++++++-
 drivers/ata/Makefile |  1 +
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/drivers/ata/Kconfig b/drivers/ata/Kconfig
index 2c8be74..0888f80 100644
--- a/drivers/ata/Kconfig
+++ b/drivers/ata/Kconfig
@@ -330,9 +330,19 @@ config SATA_DWC_OLD_DMA
 	  This option enables support for old device trees without the
 	  "dmas" property.
 
+config SATA_DWC_PMP
+	tristate "DesignWare Cores SATA with PMP support"
+	depends on 460EX || APM821xx
+	help
+	  This option enables support for the Synopsys DesignWare Cores SATA
+	  controller.
+	  It can be found on the WD MyBook Live solo or dual driver version.
+
+	  If unsure, say N.
+
 config SATA_DWC_DEBUG
 	bool "Debugging driver version"
-	depends on SATA_DWC
+	depends on SATA_DWC || SATA_DWC_PMP
 	help
 	  This option enables debugging output in the driver.
 
diff --git a/drivers/ata/Makefile b/drivers/ata/Makefile
index a46e6b7..5d6c5ed 100644
--- a/drivers/ata/Makefile
+++ b/drivers/ata/Makefile
@@ -10,6 +10,7 @@ obj-$(CONFIG_SATA_FSL)		+= sata_fsl.o
 obj-$(CONFIG_SATA_INIC162X)	+= sata_inic162x.o
 obj-$(CONFIG_SATA_SIL24)	+= sata_sil24.o
 obj-$(CONFIG_SATA_DWC)		+= sata_dwc_460ex.o
+obj-$(CONFIG_SATA_DWC_PMP)	+= sata_dwc_pmp.o
 obj-$(CONFIG_SATA_HIGHBANK)	+= sata_highbank.o libahci.o
 obj-$(CONFIG_AHCI_BRCM)		+= ahci_brcm.o libahci.o libahci_platform.o
 obj-$(CONFIG_AHCI_CEVA)		+= ahci_ceva.o libahci.o libahci_platform.o
-- 
2.1.4

